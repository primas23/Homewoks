# Creational Patterns

## Singleton/Сингълтън

 * Шаблонът се използва при нужда от даден клас да може да бъде създадена само една единствена инстанция
 * Когато някой се опита да направи инстанция, класът му връща вече създадената.
 * Възможно е по време на работа на приложението да две или повече нишки да направят инстанции от един и същи клас, затова в шаблона се подсигурява че не може да бъде достъпен този клас от няколко нишки.

Шаблонът Сингълтън е един от най-известните шаблони в програмирането. Има много различни варианти на имплементиране, но може би най-добрият е посоченият долу.

В него може да се види че конструктора му е *private* и това означава че не можеш да направиш инстанция от него. Отвън може да се достъпи само едно пропърти което връща инстанция от класа. Той е *sealed* за да може да не се наследява от други класове, което гарантира че не може нчкой да го наследи и да подмени инстацията. Тази разновидност е добре написана защото има още едно ниво на застраховане а именно клас който се създава вътре и не може по никакъв начин да се достъпи отвън. Този клас връща инстанция на *Singleton* която ще е само една за цялото приложение.

## Клас диаграма:

![Singleton pattern](http://www.c-jump.com/CIS75/Week11/const_images/SingletonClass.png)

Примерен код:

```
public sealed class Singleton
{
    private Singleton()
    {
    }

    public static Singleton Instance { get { return Nested.instance; } }
        
    private class Nested
    {
        // Explicit static constructor to tell C# compiler
        // not to mark type as beforefieldinit
        static Nested()
        {
        }

        internal static readonly Singleton instance = new Singleton();
    }
}
```